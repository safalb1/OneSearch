!function(f,h){"use strict";var m=f.YAHOO=f.YAHOO||{},p=m.NB||{},T=m.SP=m.SP||{},y="duration",b="expand",E="hidden",S="host",a="selected",A="shownItems",I="target",w="trigger",x="footerBufferId",t="timer",R=function(e,t,o,s){return-o*(e/=s)*(e-2)+t},N=function(o,s){var e,t,r,a,l,n,g=o.get("offset"),i=o.get("enableFooterBuffer");o.set(b,!1),o.get(y)?(e=s,t=o.get(y),r=g,a=o,n=e.item(r),t={duration:t,easing:R,after:function(){r?e.forEach(function(e,t){r<=t&&p.addClass(e,E)}):p.addClass(e,E),l.style.height="",l.style.overflow=""}},n&&(l=n.parentNode,n=m.DOM.getY(n)-m.DOM.getY(l),a.get("collapseToStart")?(t.attribute="scrollTop",t.target=a.get("host").offsetTop,t.unit="px",t.node=p.UA.ie?h.documentElement:p.UA.gecko?"html":"body"):(t.attribute="height",t.target=n,t.node=l),l.style.overflow=E,new m.Anim(t).start())):0<g?s.forEach(function(e,t){g<=t&&(i?u(o,s):p.addClass(e,E))}):i?u(o,s):p.addClass(s,E)},u=function(t,e){var o=document.body,s=t.get(S),r=s.getBoundingClientRect().height,o=o.getBoundingClientRect().bottom-(window.innerHeight||document.documentElement.clientHeight);p.addClass(e,E),o<(s=r-s.getBoundingClientRect().height)&&(o=s-o,document.getElementById(t.get(x)).style.height=o+"px",window.scrollBy(0,o),t._bufferHeightE.push(m.Event.on("scroll",function(e){l(t,e)},window)),t._bufferHeightE.push(m.Event.on("resize",function(e){l(t,e)},window)))},O=function(t,o,e){var s,r,a,l;o&&1==o.length&&(s=t.has("enableRepositionX")?parseInt(t.get("enableRepositionX")):0,r=t.has("enableRepositionY")?parseInt(t.get("enableRepositionY")):0,l=!1,e.forEach(function(e){l||p.hasClass(e,E)||((a=o.item(0)).style.position=t.get("repositionType"),m.DOM.setX(a,m.DOM.getX(e)+s),m.DOM.setY(a,m.DOM.getY(e)+r),l=!0)}))},q=function(e,t,o){p.removeClass(e,o),p.addClass(e,t)},l=function(r,e){clearTimeout(r.get(t)),r.set(t,setTimeout(function(){var e,t,o,s;e=r,t=document.getElementById(e.get(x)),o=t.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,o.top>=s?(t.style.height="0px",m.Event.remove(e._bufferHeightE)):o.bottom>=s&&(t.style.height=t.clientHeight-(o.bottom-s)+"px")},100))};function e(){}e.ATTRS={it:{value:""},trigger:{value:""},target:{value:""},expand:{value:!1},expandNItems:{value:0},action:{value:"click"},offset:{getter:function(e){return e?+e:0}},duration:{getter:function(e){return e?+e:0}},shownItems:{value:0},toggleType:{value:"toggle"},toggleHidden:{value:""},targetImgLazy:{value:!1},targetImgNode:{value:""},targetToCollapse:{value:""},targetToExpandNodes:{value:""},similarTrigger:{value:""},collapseOnOutsideClick:{value:!1},collapseOnMouseLeave:{value:!1},collapseSimilarTargets:{value:!1},enableReposition:{value:!1},enableRepositionX:{value:""},enableRepositionY:{value:""},enableRepositionOnPosChange:{value:!1},posChangeEventType:{value:"StickyEast:posChange"},repositionType:{value:"absolute"},collapseToStart:{value:""},cssClassforTriggered:{value:""},triggerIconSelector:{value:""},triggerIconAddCssClass:{value:""},triggerIconRemoveCssClass:{value:""},enableTriggerIconHover:{value:""},enableExpandEventFire:{value:""},hideTriggerNodes:{value:!0},hideCurrentTriggerNodeOnly:{value:!0},addClassForTarget:{value:!1},targetAddCssClass:{value:""},targetRemoveCssClass:{value:""},submitTextNodeDataBeacon:{value:!1},enableSelectTriggerNodeText:{value:!1}},e.prototype={initializer:function(){var t,o,e,s,r,a,l,n=this,g=n.get(S),i=n.get(w),u=n.get(I),c=n.get("action"),d=n.get("toggleType"),C=g.querySelectorAll(i),v=g.querySelectorAll(u);n._bufferHeightE=[],0<C.length&&0<v.length&&(n.get("expand1stModOnly")&&(r=(s=n).get(S),a=r.parentNode,u=a.parentNode,l=r.querySelectorAll(s.get("targetToCollapse")),r=r.querySelectorAll(s.get("targetToExpandNodes")),u.firstChild.isEqualNode(a)||(s.set(b,!1),r.forEach(function(e){p.hasClass(e,E)||p.addClass(e,E)}),l.forEach(function(e){p.hasClass(e,E)&&p.removeClass(e,E)}))),n.get("enableFooterBuffer")&&(a=n,s=document.getElementById("ft_wrapper"),r=document.createElement("div"),l=a.get(x),s?(r.setAttribute("id",l),r.style.height="0",s.appendChild(r)):a.set("enableFooterBuffer",!1)),n.get("showTrigger")&&p.removeClass(C.item(0).parentNode,E),"true"===n.get("enableTriggerIconHover")&&(o=(t=n).get(S),(e=o.querySelectorAll(t.get(w)))&&(m.Event.on("mouseenter",function(){q(o.querySelectorAll(t.get("triggerIconSelector")),t.get("triggerIconAddCssClass"),t.get("triggerIconRemoveCssClass"))},e),m.Event.on("mouseleave",function(){e.forEach(function(e){p.hasClass(e,t.get("cssClassforTriggered"))||q(o.querySelectorAll(t.get("triggerIconSelector")),t.get("triggerIconRemoveCssClass"),t.get("triggerIconAddCssClass"))})},e))),n.get("disableRtClk")&&m.Event.delegate("contextmenu",n._disableRtClk,g,i),d===b?(m.Event.delegate(c,n._expand,g,i,n),m.Event.delegate("keydown",n._expand,g,i,n),"true"===n.get("collapseOnOutsideClick")&&m.Event.outside("click",function(){!0===n.get(b)&&(!n.get("hideTriggerNodes")&&C.length?C.item(0).click():C.forEach(function(e){p.hasClass(e,E)||e.click()}))},v),"true"===n.get("collapseOnMouseLeave")&&m.Event.on("mouseleave",function(){!0===n.get(b)&&C.forEach(function(e){p.hasClass(e,E)||e.click()})},g),"true"===n.get("enableReposition")&&m.Event.on("windowresize",function(){O(n,v,C)}),"true"===n.get("enableRepositionOnPosChange")&&m.Event.on(n.get("posChangeEventType"),function(){O(n,v,C)})):(m.Event.delegate(c,n._toggle,g,i,n),m.Event.delegate("keydown",n._toggle,g,i,n),n.get("dfltState")&&m.Event.delegate("mouseleave",n._default,g,i,n)))},_disableRtClk:function(e){e.halt()},_toggle:function(e){var t,o,s=this,r=s.get(S);e&&e.keyCode&&13!=e.keyCode||(e.halt(),p.hasClass(e.currentTarget,a)||(r&&(o=r.querySelectorAll(s.get(w)),r=r.querySelectorAll(s.get(I)),p.removeClass(o,a),p.addClass(e.currentTarget,a),o=m.DOM.indexOf(e.currentTarget,o),(o=r.item(o+parseInt(s.get("offset"),0)))&&(p.removeClass(r,a),p.addClass(o,a),"true"==s.get("toggleHidden")&&(p.addClass(r,E),p.removeClass(o,E)))),"true"===s.get("submitTextNodeDataBeacon")?(s=e.currentTarget._node)&&s.children&&s.children[0]&&(t=s.children[0].getAttribute("data-beacon")):t=e.currentTarget.getAttribute("data-beacon"),t&&m.ULT.beacon_url(t)))},_default:function(){var e,t=this.get(S);t&&(e=t.querySelectorAll(this.get(w)),t=t.querySelectorAll(this.get(I)),p.removeClass(e,a),p.removeClass(t,a),(t=t.item(this.get("offset")-1))&&p.addClass(t,a))},_expand:function(e){var o,s,r,t,a,l,n,g,i=this,u=i.get(S),c=i.get("targetToCollapse"),d=i.get("targetToExpandNodes"),C=i.get("targetImgNode"),v=i.get("triggerIconSelector");e&&e.keyCode&&13!=e.keyCode||(e.halt(),i.get("enableSelectTriggerNodeText")&&f.getSelection&&f.getSelection().toString()||u&&(t=u.querySelectorAll(i.get(w)),a=u.querySelectorAll(i.get(I)),l=c&&""!=c?u.querySelectorAll(c):[],c=d&&""!=d?u.querySelectorAll(d):[],i.get("collapseSimilarTargets")&&(g=i.get(w),i.has("similarTrigger")&&(g=i.get("similarTrigger")),h.querySelectorAll(g).forEach(function(e){p.hasClass(e,i.get("cssClassforTriggered"))&&e!==t.item(0)&&e.click()})),d=v&&""!=v?u.querySelectorAll(v):[],!1===i.get(b)?(i.set(b,!0),g=C&&""!=C?u.querySelectorAll(C):[],i.get("targetImgLazy")&&g&&g.forEach(function(e){e.getAttribute("data-js-src")&&(e.setAttribute("src",e.getAttribute("data-js-src")),p.removeClass(e,E),e.removeAttribute("data-js-src"))}),i.get(y)?(v=a,C=i.get(y),(g=v.item(0))&&(g=(n=g.parentNode).offsetHeight,n.style.overflow=E,n.style.height=g,p.removeClass(v,E),v=n.scrollHeight,new m.Anim({node:n,attribute:"height",target:v,duration:C,easing:R,after:function(){n.style.height="",n.style.overflow=""}}).start())):(0<i.get("expandNItems")?(o=i.get(A),r=(s=o)+i.get("expandNItems"),a.forEach(function(e,t){s<=t&&t<r&&(p.removeClass(e,E),i.set(A,++o))}),o<a.length&&i.set(b,!1)):(p.removeClass(a,E),i.set(A,a.length)),i.has("targetCompJsScroll")&&u.querySelector(i.get("targetCompJsScroll"))&&setTimeout(function(){m.Event.fire("resetContainer",null,u.querySelector(i.get("targetCompJsScroll")))},100),l&&p.addClass(l,E),c&&p.removeClass(c,E),"true"===i.get("enableReposition")&&O(i,a,t),i.get("cssClassforTriggered")&&p.addClass(t,i.get("cssClassforTriggered")),d&&q(d,i.get("triggerIconAddCssClass"),i.get("triggerIconRemoveCssClass")),i.get("addClassForTarget")&&q(a,i.get("targetAddCssClass"),i.get("targetRemoveCssClass"))),"true"===i.get("enableExpandEventFire")&&m.Event.fire("compJsToggle:expand_"+i.get("it"))):(N(i,a),i.set(A,0),l&&p.removeClass(l,E),c&&p.addClass(c,E),i.has("cssClassforTriggered")&&p.removeClass(t,i.get("cssClassforTriggered")),d&&q(d,i.get("triggerIconRemoveCssClass"),i.get("triggerIconAddCssClass"))),i.get("hideTriggerNodes")&&1<t.length&&(o=i.get(A),(i.get("expandNItems")<=0||o==a.length||0==o)&&(!0===i.get("hideCurrentTriggerNodeOnly")?(p.removeClass(t,E),p.addClass(e.currentTarget,E)):p.addClass(t,E))),(e=e.currentTarget.getAttribute("data-beacon"))&&T.ULT.beacon_url(e)))}},m.SP.compJsToggle=e}(window,document);